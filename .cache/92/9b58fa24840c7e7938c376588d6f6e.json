{"id":"J0po","dependencies":[{"name":"/Users/avdonr/Documents/GitHub/intro-to-iot/package.json","includedInParent":true,"mtime":1607035505474},{"name":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/package.json","includedInParent":true,"mtime":1607034967163},{"name":"xtend","loc":{"line":6,"column":20},"parent":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/lib/store.js","resolved":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/xtend/immutable.js"},{"name":"readable-stream","loc":{"line":8,"column":23},"parent":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/lib/store.js","resolved":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/readable-stream/readable-browser.js"}],"generated":{"js":"\"use strict\";var t=require(\"xtend\"),e=require(\"readable-stream\").Readable,i={objectMode:!0},n={clean:!0};function s(e){if(!(this instanceof s))return new s(e);this.options=e||{},this.options=t(n,e),this._inflights=new Map}s.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},s.prototype.createStream=function(){var t=new e(i),n=!1,s=[],o=0;return this._inflights.forEach(function(t,e){s.push(t)}),t._read=function(){!n&&o<s.length?this.push(s[o++]):this.push(null)},t.destroy=function(){if(!n){var t=this;n=!0,setTimeout(function(){t.emit(\"close\")},0)}},t},s.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error(\"missing packet\")),this},s.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error(\"missing packet\")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},module.exports=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":6,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"xtend","original":{"line":6,"column":4},"generated":{"line":1,"column":17}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"require","original":{"line":6,"column":12},"generated":{"line":1,"column":19}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":6,"column":20},"generated":{"line":1,"column":27}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Readable","original":{"line":8,"column":4},"generated":{"line":1,"column":36}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"require","original":{"line":8,"column":15},"generated":{"line":1,"column":38}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":8,"column":23},"generated":{"line":1,"column":46}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Readable","original":{"line":8,"column":42},"generated":{"line":1,"column":65}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"streamsOpts","original":{"line":9,"column":4},"generated":{"line":1,"column":74}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":9,"column":18},"generated":{"line":1,"column":76}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"objectMode","original":{"line":9,"column":20},"generated":{"line":1,"column":77}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":9,"column":32},"generated":{"line":1,"column":89}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"defaultStoreOptions","original":{"line":10,"column":4},"generated":{"line":1,"column":92}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":10,"column":26},"generated":{"line":1,"column":94}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"clean","original":{"line":11,"column":2},"generated":{"line":1,"column":95}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":11,"column":9},"generated":{"line":1,"column":102}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":20,"column":0},"generated":{"line":1,"column":105}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":20,"column":9},"generated":{"line":1,"column":114}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":20,"column":16},"generated":{"line":1,"column":116}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":21,"column":6},"generated":{"line":1,"column":119}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":21,"column":8},"generated":{"line":1,"column":124}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":21,"column":24},"generated":{"line":1,"column":140}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":22,"column":11},"generated":{"line":1,"column":143}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":22,"column":11},"generated":{"line":1,"column":150}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":22,"column":15},"generated":{"line":1,"column":154}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":22,"column":21},"generated":{"line":1,"column":156}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":25,"column":7},"generated":{"line":1,"column":159}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":25,"column":7},"generated":{"line":1,"column":164}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":25,"column":17},"generated":{"line":1,"column":172}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":25,"column":28},"generated":{"line":1,"column":175}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":28,"column":7},"generated":{"line":1,"column":178}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":28,"column":7},"generated":{"line":1,"column":183}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"xtend","original":{"line":28,"column":17},"generated":{"line":1,"column":191}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"defaultStoreOptions","original":{"line":28,"column":23},"generated":{"line":1,"column":193}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":28,"column":44},"generated":{"line":1,"column":195}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":30,"column":7},"generated":{"line":1,"column":198}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":30,"column":7},"generated":{"line":1,"column":203}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":30,"column":20},"generated":{"line":1,"column":214}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Map","original":{"line":30,"column":24},"generated":{"line":1,"column":218}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":38,"column":0},"generated":{"line":1,"column":222}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"prototype","original":{"line":38,"column":6},"generated":{"line":1,"column":224}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"put","original":{"line":38,"column":16},"generated":{"line":1,"column":234}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":38,"column":22},"generated":{"line":1,"column":238}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":38,"column":32},"generated":{"line":1,"column":247}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":38,"column":40},"generated":{"line":1,"column":249}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":45,"column":9},"generated":{"line":1,"column":252}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":39,"column":7},"generated":{"line":1,"column":259}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":39,"column":7},"generated":{"line":1,"column":264}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"set","original":{"line":39,"column":18},"generated":{"line":1,"column":275}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":39,"column":22},"generated":{"line":1,"column":279}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"messageId","original":{"line":39,"column":29},"generated":{"line":1,"column":281}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":39,"column":40},"generated":{"line":1,"column":291}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":41,"column":6},"generated":{"line":1,"column":294}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":42,"column":4},"generated":{"line":1,"column":297}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":45,"column":9},"generated":{"line":1,"column":301}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":52,"column":0},"generated":{"line":1,"column":307}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"prototype","original":{"line":52,"column":6},"generated":{"line":1,"column":309}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"createStream","original":{"line":52,"column":16},"generated":{"line":1,"column":319}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":52,"column":31},"generated":{"line":1,"column":332}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":53,"column":6},"generated":{"line":1,"column":343}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":53,"column":6},"generated":{"line":1,"column":347}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":53,"column":15},"generated":{"line":1,"column":349}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Readable","original":{"line":53,"column":19},"generated":{"line":1,"column":353}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"streamsOpts","original":{"line":53,"column":28},"generated":{"line":1,"column":355}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":54,"column":6},"generated":{"line":1,"column":358}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":54,"column":18},"generated":{"line":1,"column":361}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"values","original":{"line":55,"column":6},"generated":{"line":1,"column":363}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":55,"column":15},"generated":{"line":1,"column":365}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"i","original":{"line":56,"column":6},"generated":{"line":1,"column":368}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":56,"column":10},"generated":{"line":1,"column":370}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":84,"column":9},"generated":{"line":1,"column":372}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":58,"column":7},"generated":{"line":1,"column":379}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":58,"column":7},"generated":{"line":1,"column":384}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"forEach","original":{"line":58,"column":18},"generated":{"line":1,"column":395}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":58,"column":26},"generated":{"line":1,"column":403}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"value","original":{"line":58,"column":36},"generated":{"line":1,"column":412}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"key","original":{"line":58,"column":43},"generated":{"line":1,"column":414}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"values","original":{"line":59,"column":4},"generated":{"line":1,"column":417}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"push","original":{"line":59,"column":11},"generated":{"line":1,"column":419}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"value","original":{"line":59,"column":16},"generated":{"line":1,"column":424}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":62,"column":2},"generated":{"line":1,"column":429}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_read","original":{"line":62,"column":9},"generated":{"line":1,"column":431}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":62,"column":17},"generated":{"line":1,"column":437}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":63,"column":9},"generated":{"line":1,"column":449}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"i","original":{"line":63,"column":22},"generated":{"line":1,"column":452}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"values","original":{"line":63,"column":26},"generated":{"line":1,"column":454}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"length","original":{"line":63,"column":33},"generated":{"line":1,"column":456}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"push","original":{"line":64,"column":11},"generated":{"line":1,"column":463}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"push","original":{"line":64,"column":11},"generated":{"line":1,"column":468}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"values","original":{"line":64,"column":16},"generated":{"line":1,"column":473}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"i","original":{"line":64,"column":23},"generated":{"line":1,"column":475}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"push","original":{"line":66,"column":11},"generated":{"line":1,"column":481}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"push","original":{"line":66,"column":11},"generated":{"line":1,"column":486}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":66,"column":16},"generated":{"line":1,"column":491}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":70,"column":2},"generated":{"line":1,"column":498}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroy","original":{"line":70,"column":9},"generated":{"line":1,"column":500}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":70,"column":19},"generated":{"line":1,"column":508}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":71,"column":8},"generated":{"line":1,"column":519}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":71,"column":8},"generated":{"line":1,"column":523}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":71,"column":8},"generated":{"line":1,"column":525}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"self","original":{"line":75,"column":8},"generated":{"line":1,"column":526}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"self","original":{"line":75,"column":8},"generated":{"line":1,"column":530}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":75,"column":15},"generated":{"line":1,"column":532}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"destroyed","original":{"line":77,"column":4},"generated":{"line":1,"column":537}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":77,"column":16},"generated":{"line":1,"column":540}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"setTimeout","original":{"line":79,"column":4},"generated":{"line":1,"column":542}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":79,"column":15},"generated":{"line":1,"column":553}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"self","original":{"line":80,"column":6},"generated":{"line":1,"column":564}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"emit","original":{"line":80,"column":11},"generated":{"line":1,"column":566}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":80,"column":16},"generated":{"line":1,"column":571}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":81,"column":7},"generated":{"line":1,"column":581}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"stream","original":{"line":84,"column":9},"generated":{"line":1,"column":586}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":90,"column":0},"generated":{"line":1,"column":589}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"prototype","original":{"line":90,"column":6},"generated":{"line":1,"column":591}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"del","original":{"line":90,"column":16},"generated":{"line":1,"column":601}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":90,"column":22},"generated":{"line":1,"column":605}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":90,"column":32},"generated":{"line":1,"column":614}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":90,"column":40},"generated":{"line":1,"column":616}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":99,"column":9},"generated":{"line":1,"column":619}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":91,"column":2},"generated":{"line":1,"column":626}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":91,"column":11},"generated":{"line":1,"column":628}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":91,"column":16},"generated":{"line":1,"column":633}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"get","original":{"line":91,"column":27},"generated":{"line":1,"column":644}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":91,"column":31},"generated":{"line":1,"column":648}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"messageId","original":{"line":91,"column":38},"generated":{"line":1,"column":650}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":93,"column":9},"generated":{"line":1,"column":663}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":93,"column":9},"generated":{"line":1,"column":668}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"delete","original":{"line":93,"column":20},"generated":{"line":1,"column":679}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":93,"column":27},"generated":{"line":1,"column":686}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"messageId","original":{"line":93,"column":34},"generated":{"line":1,"column":688}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":94,"column":4},"generated":{"line":1,"column":699}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":94,"column":7},"generated":{"line":1,"column":701}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":94,"column":13},"generated":{"line":1,"column":706}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":95,"column":13},"generated":{"line":1,"column":710}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":96,"column":4},"generated":{"line":1,"column":713}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":96,"column":7},"generated":{"line":1,"column":715}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Error","original":{"line":96,"column":11},"generated":{"line":1,"column":719}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":96,"column":17},"generated":{"line":1,"column":725}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":99,"column":9},"generated":{"line":1,"column":744}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":105,"column":0},"generated":{"line":1,"column":750}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"prototype","original":{"line":105,"column":6},"generated":{"line":1,"column":752}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"get","original":{"line":105,"column":16},"generated":{"line":1,"column":762}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":105,"column":22},"generated":{"line":1,"column":766}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":105,"column":32},"generated":{"line":1,"column":775}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":105,"column":40},"generated":{"line":1,"column":777}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":113,"column":9},"generated":{"line":1,"column":780}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":106,"column":2},"generated":{"line":1,"column":787}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":106,"column":11},"generated":{"line":1,"column":789}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":106,"column":16},"generated":{"line":1,"column":794}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"get","original":{"line":106,"column":27},"generated":{"line":1,"column":805}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":106,"column":31},"generated":{"line":1,"column":809}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"messageId","original":{"line":106,"column":38},"generated":{"line":1,"column":811}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":108,"column":4},"generated":{"line":1,"column":823}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":108,"column":7},"generated":{"line":1,"column":825}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"packet","original":{"line":108,"column":13},"generated":{"line":1,"column":830}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":109,"column":13},"generated":{"line":1,"column":833}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":110,"column":4},"generated":{"line":1,"column":836}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":110,"column":7},"generated":{"line":1,"column":838}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Error","original":{"line":110,"column":11},"generated":{"line":1,"column":842}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":110,"column":17},"generated":{"line":1,"column":848}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":113,"column":9},"generated":{"line":1,"column":867}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":119,"column":0},"generated":{"line":1,"column":873}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"prototype","original":{"line":119,"column":6},"generated":{"line":1,"column":875}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"close","original":{"line":119,"column":16},"generated":{"line":1,"column":885}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":119,"column":24},"generated":{"line":1,"column":891}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":119,"column":34},"generated":{"line":1,"column":900}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":120,"column":6},"generated":{"line":1,"column":903}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"options","original":{"line":120,"column":11},"generated":{"line":1,"column":908}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"clean","original":{"line":120,"column":19},"generated":{"line":1,"column":916}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":121,"column":9},"generated":{"line":1,"column":924}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"_inflights","original":{"line":121,"column":9},"generated":{"line":1,"column":929}},{"source":"../../../node_modules/mqtt/lib/store.js","original":{"line":121,"column":22},"generated":{"line":1,"column":940}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":123,"column":6},"generated":{"line":1,"column":946}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"cb","original":{"line":124,"column":4},"generated":{"line":1,"column":949}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"module","original":{"line":128,"column":0},"generated":{"line":1,"column":954}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"exports","original":{"line":128,"column":7},"generated":{"line":1,"column":961}},{"source":"../../../node_modules/mqtt/lib/store.js","name":"Store","original":{"line":128,"column":17},"generated":{"line":1,"column":969}}],"sources":{"../../../node_modules/mqtt/lib/store.js":"'use strict'\n\n/**\n * Module dependencies\n */\nvar xtend = require('xtend')\n\nvar Readable = require('readable-stream').Readable\nvar streamsOpts = { objectMode: true }\nvar defaultStoreOptions = {\n  clean: true\n}\n\n/**\n * In-memory implementation of the message store\n * This can actually be saved into files.\n *\n * @param {Object} [options] - store options\n */\nfunction Store (options) {\n  if (!(this instanceof Store)) {\n    return new Store(options)\n  }\n\n  this.options = options || {}\n\n  // Defaults\n  this.options = xtend(defaultStoreOptions, options)\n\n  this._inflights = new Map()\n}\n\n/**\n * Adds a packet to the store, a packet is\n * anything that has a messageId property.\n *\n */\nStore.prototype.put = function (packet, cb) {\n  this._inflights.set(packet.messageId, packet)\n\n  if (cb) {\n    cb()\n  }\n\n  return this\n}\n\n/**\n * Creates a stream with all the packets in the store\n *\n */\nStore.prototype.createStream = function () {\n  var stream = new Readable(streamsOpts)\n  var destroyed = false\n  var values = []\n  var i = 0\n\n  this._inflights.forEach(function (value, key) {\n    values.push(value)\n  })\n\n  stream._read = function () {\n    if (!destroyed && i < values.length) {\n      this.push(values[i++])\n    } else {\n      this.push(null)\n    }\n  }\n\n  stream.destroy = function () {\n    if (destroyed) {\n      return\n    }\n\n    var self = this\n\n    destroyed = true\n\n    setTimeout(function () {\n      self.emit('close')\n    }, 0)\n  }\n\n  return stream\n}\n\n/**\n * deletes a packet from the store.\n */\nStore.prototype.del = function (packet, cb) {\n  packet = this._inflights.get(packet.messageId)\n  if (packet) {\n    this._inflights.delete(packet.messageId)\n    cb(null, packet)\n  } else if (cb) {\n    cb(new Error('missing packet'))\n  }\n\n  return this\n}\n\n/**\n * get a packet from the store.\n */\nStore.prototype.get = function (packet, cb) {\n  packet = this._inflights.get(packet.messageId)\n  if (packet) {\n    cb(null, packet)\n  } else if (cb) {\n    cb(new Error('missing packet'))\n  }\n\n  return this\n}\n\n/**\n * Close the store\n */\nStore.prototype.close = function (cb) {\n  if (this.options.clean) {\n    this._inflights = null\n  }\n  if (cb) {\n    cb()\n  }\n}\n\nmodule.exports = Store\n"},"lineCount":null}},"error":null,"hash":"50ec3edd88c4724d362d982e89af1e4e","cacheData":{"env":{}}}