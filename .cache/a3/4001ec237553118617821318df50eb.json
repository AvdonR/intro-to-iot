{"id":"IUlR","dependencies":[{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\package.json","includedInParent":true,"mtime":1607033658464},{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\package.json","includedInParent":true,"mtime":499162500000},{"name":"readable-stream","loc":{"line":3,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\wx.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\readable-stream\\readable-browser.js"},{"name":"duplexify","loc":{"line":4,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\wx.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\duplexify\\index.js"},{"name":"buffer","parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\wx.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar o,t,n,r=require(\"buffer\").Buffer,e=require(\"readable-stream\").Transform,s=require(\"duplexify\");function f(){var t=new e;return t._write=function(t,n,r){o.send({data:t.buffer,success:function(){r()},fail:function(o){r(new Error(o))}})},t._flush=function(t){o.close({success:function(){t()}})},t}function u(o){o.hostname||(o.hostname=\"localhost\"),o.path||(o.path=\"/\"),o.wsOptions||(o.wsOptions={})}function c(o,t){var n=\"wxs\"===o.protocol?\"wss\":\"ws\",r=n+\"://\"+o.hostname+o.path;return o.port&&80!==o.port&&443!==o.port&&(r=n+\"://\"+o.hostname+\":\"+o.port+o.path),\"function\"==typeof o.transformWsUrl&&(r=o.transformWsUrl(r,o,t)),r}function a(){o.onOpen(function(){n.setReadable(t),n.setWritable(t),n.emit(\"connect\")}),o.onMessage(function(o){var n=o.data;n=n instanceof ArrayBuffer?r.from(n):r.from(n,\"utf8\"),t.push(n)}),o.onClose(function(){n.end(),n.destroy()}),o.onError(function(o){n.destroy(new Error(o.errMsg))})}function i(r,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error(\"Could not determine host. Specify host manually.\");var i=\"MQIsdp\"===e.protocolId&&3===e.protocolVersion?\"mqttv3.1\":\"mqtt\";u(e);var l=c(e,r);o=wx.connectSocket({url:l,protocols:[i]}),t=f(),(n=s.obj())._destroy=function(t,n){o.close({success:function(){n&&n(t)}})};var p=n.destroy;return n.destroy=function(){n.destroy=p;var t=this;setTimeout(function(){o.close({fail:function(){t._destroy(new Error)}})},0)}.bind(n),a(),n}module.exports=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":134,"column":0},"generated":{"line":2,"column":0}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":7,"column":4},"generated":{"line":2,"column":4}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":8,"column":4},"generated":{"line":2,"column":6}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":9,"column":4},"generated":{"line":2,"column":8}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":134,"column":0},"generated":{"line":2,"column":10}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":134,"column":0},"generated":{"line":2,"column":12}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":134,"column":0},"generated":{"line":2,"column":20}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":134,"column":0},"generated":{"line":2,"column":30}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Transform","original":{"line":3,"column":4},"generated":{"line":2,"column":37}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"require","original":{"line":3,"column":16},"generated":{"line":2,"column":39}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":3,"column":24},"generated":{"line":2,"column":47}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Transform","original":{"line":3,"column":43},"generated":{"line":2,"column":66}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"duplexify","original":{"line":4,"column":4},"generated":{"line":2,"column":76}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"require","original":{"line":4,"column":16},"generated":{"line":2,"column":78}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":4,"column":24},"generated":{"line":2,"column":86}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":11,"column":0},"generated":{"line":2,"column":99}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildProxy","original":{"line":11,"column":9},"generated":{"line":2,"column":108}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":12,"column":6},"generated":{"line":2,"column":112}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":12,"column":6},"generated":{"line":2,"column":116}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":12,"column":14},"generated":{"line":2,"column":118}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Transform","original":{"line":12,"column":18},"generated":{"line":2,"column":122}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":32,"column":9},"generated":{"line":2,"column":124}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":13,"column":2},"generated":{"line":2,"column":131}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"_write","original":{"line":13,"column":8},"generated":{"line":2,"column":133}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":13,"column":17},"generated":{"line":2,"column":140}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"chunk","original":{"line":13,"column":27},"generated":{"line":2,"column":149}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"encoding","original":{"line":13,"column":34},"generated":{"line":2,"column":151}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"next","original":{"line":13,"column":44},"generated":{"line":2,"column":153}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":14,"column":4},"generated":{"line":2,"column":156}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"send","original":{"line":14,"column":15},"generated":{"line":2,"column":158}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":14,"column":20},"generated":{"line":2,"column":163}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":15,"column":6},"generated":{"line":2,"column":164}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"chunk","original":{"line":15,"column":12},"generated":{"line":2,"column":169}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buffer","original":{"line":15,"column":18},"generated":{"line":2,"column":171}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"success","original":{"line":16,"column":6},"generated":{"line":2,"column":178}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":16,"column":15},"generated":{"line":2,"column":186}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"next","original":{"line":17,"column":8},"generated":{"line":2,"column":197}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"fail","original":{"line":19,"column":6},"generated":{"line":2,"column":202}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":19,"column":12},"generated":{"line":2,"column":207}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"errMsg","original":{"line":19,"column":22},"generated":{"line":2,"column":216}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"next","original":{"line":20,"column":8},"generated":{"line":2,"column":219}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":20,"column":13},"generated":{"line":2,"column":221}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Error","original":{"line":20,"column":17},"generated":{"line":2,"column":225}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"errMsg","original":{"line":20,"column":23},"generated":{"line":2,"column":231}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":24,"column":2},"generated":{"line":2,"column":239}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"_flush","original":{"line":24,"column":8},"generated":{"line":2,"column":241}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":24,"column":17},"generated":{"line":2,"column":248}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"done","original":{"line":24,"column":37},"generated":{"line":2,"column":257}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":25,"column":4},"generated":{"line":2,"column":260}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"close","original":{"line":25,"column":15},"generated":{"line":2,"column":262}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":25,"column":21},"generated":{"line":2,"column":268}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"success","original":{"line":26,"column":6},"generated":{"line":2,"column":269}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":26,"column":15},"generated":{"line":2,"column":277}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"done","original":{"line":27,"column":8},"generated":{"line":2,"column":288}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":32,"column":9},"generated":{"line":2,"column":296}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":35,"column":0},"generated":{"line":2,"column":298}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"setDefaultOpts","original":{"line":35,"column":9},"generated":{"line":2,"column":307}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":35,"column":25},"generated":{"line":2,"column":309}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":36,"column":7},"generated":{"line":2,"column":312}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":36,"column":12},"generated":{"line":2,"column":314}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":37,"column":4},"generated":{"line":2,"column":325}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":37,"column":9},"generated":{"line":2,"column":327}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":37,"column":20},"generated":{"line":2,"column":336}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":39,"column":7},"generated":{"line":2,"column":349}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"path","original":{"line":39,"column":12},"generated":{"line":2,"column":351}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":40,"column":4},"generated":{"line":2,"column":358}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"path","original":{"line":40,"column":9},"generated":{"line":2,"column":360}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":40,"column":16},"generated":{"line":2,"column":365}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":43,"column":7},"generated":{"line":2,"column":370}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"wsOptions","original":{"line":43,"column":12},"generated":{"line":2,"column":372}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":44,"column":4},"generated":{"line":2,"column":384}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"wsOptions","original":{"line":44,"column":9},"generated":{"line":2,"column":386}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":44,"column":21},"generated":{"line":2,"column":396}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":48,"column":0},"generated":{"line":2,"column":400}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildUrl","original":{"line":48,"column":9},"generated":{"line":2,"column":409}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":48,"column":19},"generated":{"line":2,"column":411}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"client","original":{"line":48,"column":25},"generated":{"line":2,"column":413}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocol","original":{"line":49,"column":6},"generated":{"line":2,"column":416}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocol","original":{"line":49,"column":6},"generated":{"line":2,"column":420}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":49,"column":35},"generated":{"line":2,"column":422}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":49,"column":17},"generated":{"line":2,"column":430}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocol","original":{"line":49,"column":22},"generated":{"line":2,"column":432}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":49,"column":43},"generated":{"line":2,"column":441}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":49,"column":51},"generated":{"line":2,"column":447}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":50,"column":6},"generated":{"line":2,"column":452}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocol","original":{"line":50,"column":12},"generated":{"line":2,"column":454}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":50,"column":23},"generated":{"line":2,"column":456}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":50,"column":31},"generated":{"line":2,"column":462}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":50,"column":36},"generated":{"line":2,"column":464}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":50,"column":47},"generated":{"line":2,"column":473}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"path","original":{"line":50,"column":52},"generated":{"line":2,"column":475}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":57,"column":9},"generated":{"line":2,"column":480}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":51,"column":6},"generated":{"line":2,"column":487}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"port","original":{"line":51,"column":11},"generated":{"line":2,"column":489}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":51,"column":33},"generated":{"line":2,"column":495}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":51,"column":19},"generated":{"line":2,"column":500}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"port","original":{"line":51,"column":24},"generated":{"line":2,"column":502}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":51,"column":53},"generated":{"line":2,"column":508}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":51,"column":39},"generated":{"line":2,"column":514}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"port","original":{"line":51,"column":44},"generated":{"line":2,"column":516}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":52,"column":4},"generated":{"line":2,"column":523}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocol","original":{"line":52,"column":10},"generated":{"line":2,"column":525}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":52,"column":21},"generated":{"line":2,"column":527}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":52,"column":29},"generated":{"line":2,"column":533}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":52,"column":34},"generated":{"line":2,"column":535}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":52,"column":45},"generated":{"line":2,"column":544}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":52,"column":51},"generated":{"line":2,"column":548}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"port","original":{"line":52,"column":56},"generated":{"line":2,"column":550}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":52,"column":63},"generated":{"line":2,"column":555}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"path","original":{"line":52,"column":68},"generated":{"line":2,"column":557}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":54,"column":39},"generated":{"line":2,"column":563}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":54,"column":14},"generated":{"line":2,"column":582}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"transformWsUrl","original":{"line":54,"column":19},"generated":{"line":2,"column":584}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":55,"column":4},"generated":{"line":2,"column":601}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":55,"column":10},"generated":{"line":2,"column":603}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"transformWsUrl","original":{"line":55,"column":15},"generated":{"line":2,"column":605}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":55,"column":30},"generated":{"line":2,"column":620}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":55,"column":35},"generated":{"line":2,"column":622}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"client","original":{"line":55,"column":41},"generated":{"line":2,"column":624}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":57,"column":9},"generated":{"line":2,"column":628}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":60,"column":0},"generated":{"line":2,"column":630}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"bindEventHandler","original":{"line":60,"column":9},"generated":{"line":2,"column":639}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":61,"column":2},"generated":{"line":2,"column":643}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"onOpen","original":{"line":61,"column":13},"generated":{"line":2,"column":645}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":61,"column":20},"generated":{"line":2,"column":652}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":62,"column":4},"generated":{"line":2,"column":663}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"setReadable","original":{"line":62,"column":11},"generated":{"line":2,"column":665}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":62,"column":23},"generated":{"line":2,"column":677}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":63,"column":4},"generated":{"line":2,"column":680}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"setWritable","original":{"line":63,"column":11},"generated":{"line":2,"column":682}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":63,"column":23},"generated":{"line":2,"column":694}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":64,"column":4},"generated":{"line":2,"column":697}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"emit","original":{"line":64,"column":11},"generated":{"line":2,"column":699}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":64,"column":16},"generated":{"line":2,"column":704}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":67,"column":2},"generated":{"line":2,"column":717}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"onMessage","original":{"line":67,"column":13},"generated":{"line":2,"column":719}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":67,"column":23},"generated":{"line":2,"column":729}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"res","original":{"line":67,"column":33},"generated":{"line":2,"column":738}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":68,"column":8},"generated":{"line":2,"column":741}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":68,"column":8},"generated":{"line":2,"column":745}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"res","original":{"line":68,"column":15},"generated":{"line":2,"column":747}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":68,"column":19},"generated":{"line":2,"column":749}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":70,"column":37},"generated":{"line":2,"column":754}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":70,"column":8},"generated":{"line":2,"column":756}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"ArrayBuffer","original":{"line":70,"column":24},"generated":{"line":2,"column":769}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Buffer","original":{"line":70,"column":44},"generated":{"line":2,"column":781}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"from","original":{"line":70,"column":51},"generated":{"line":2,"column":783}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":70,"column":56},"generated":{"line":2,"column":788}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Buffer","original":{"line":71,"column":16},"generated":{"line":2,"column":791}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"from","original":{"line":71,"column":23},"generated":{"line":2,"column":793}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":71,"column":28},"generated":{"line":2,"column":798}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":71,"column":34},"generated":{"line":2,"column":800}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":72,"column":4},"generated":{"line":2,"column":808}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"push","original":{"line":72,"column":10},"generated":{"line":2,"column":810}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"data","original":{"line":72,"column":15},"generated":{"line":2,"column":815}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":75,"column":2},"generated":{"line":2,"column":820}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"onClose","original":{"line":75,"column":13},"generated":{"line":2,"column":822}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":75,"column":21},"generated":{"line":2,"column":830}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":76,"column":4},"generated":{"line":2,"column":841}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"end","original":{"line":76,"column":11},"generated":{"line":2,"column":843}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":77,"column":4},"generated":{"line":2,"column":849}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroy","original":{"line":77,"column":11},"generated":{"line":2,"column":851}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":80,"column":2},"generated":{"line":2,"column":863}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"onError","original":{"line":80,"column":13},"generated":{"line":2,"column":865}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":80,"column":21},"generated":{"line":2,"column":873}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"res","original":{"line":80,"column":31},"generated":{"line":2,"column":882}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":81,"column":4},"generated":{"line":2,"column":885}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroy","original":{"line":81,"column":11},"generated":{"line":2,"column":887}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":81,"column":19},"generated":{"line":2,"column":895}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Error","original":{"line":81,"column":23},"generated":{"line":2,"column":899}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"res","original":{"line":81,"column":29},"generated":{"line":2,"column":905}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"errMsg","original":{"line":81,"column":33},"generated":{"line":2,"column":907}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":85,"column":0},"generated":{"line":2,"column":918}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildStream","original":{"line":85,"column":9},"generated":{"line":2,"column":927}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"client","original":{"line":85,"column":22},"generated":{"line":2,"column":929}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":85,"column":30},"generated":{"line":2,"column":931}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":88,"column":6},"generated":{"line":2,"column":934}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":86,"column":2},"generated":{"line":2,"column":937}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":86,"column":7},"generated":{"line":2,"column":939}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":86,"column":18},"generated":{"line":2,"column":948}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":86,"column":23},"generated":{"line":2,"column":950}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":86,"column":35},"generated":{"line":2,"column":960}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"host","original":{"line":86,"column":40},"generated":{"line":2,"column":962}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":88,"column":7},"generated":{"line":2,"column":968}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"hostname","original":{"line":88,"column":12},"generated":{"line":2,"column":970}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":89,"column":10},"generated":{"line":2,"column":979}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":89,"column":10},"generated":{"line":2,"column":985}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Error","original":{"line":89,"column":14},"generated":{"line":2,"column":989}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":89,"column":20},"generated":{"line":2,"column":995}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"websocketSubProtocol","original":{"line":92,"column":6},"generated":{"line":2,"column":1047}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"websocketSubProtocol","original":{"line":92,"column":6},"generated":{"line":2,"column":1051}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":93,"column":25},"generated":{"line":2,"column":1053}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":93,"column":5},"generated":{"line":2,"column":1064}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocolId","original":{"line":93,"column":10},"generated":{"line":2,"column":1066}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":93,"column":64},"generated":{"line":2,"column":1078}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":93,"column":39},"generated":{"line":2,"column":1082}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocolVersion","original":{"line":93,"column":44},"generated":{"line":2,"column":1084}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":94,"column":8},"generated":{"line":2,"column":1100}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":95,"column":8},"generated":{"line":2,"column":1111}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"setDefaultOpts","original":{"line":97,"column":2},"generated":{"line":2,"column":1118}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":97,"column":17},"generated":{"line":2,"column":1120}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":99,"column":6},"generated":{"line":2,"column":1123}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":99,"column":6},"generated":{"line":2,"column":1127}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildUrl","original":{"line":99,"column":12},"generated":{"line":2,"column":1129}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"opts","original":{"line":99,"column":21},"generated":{"line":2,"column":1131}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"client","original":{"line":99,"column":27},"generated":{"line":2,"column":1133}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":100,"column":2},"generated":{"line":2,"column":1136}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"wx","original":{"line":100,"column":15},"generated":{"line":2,"column":1138}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"connectSocket","original":{"line":100,"column":18},"generated":{"line":2,"column":1141}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":100,"column":32},"generated":{"line":2,"column":1155}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":101,"column":4},"generated":{"line":2,"column":1156}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"url","original":{"line":101,"column":9},"generated":{"line":2,"column":1160}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"protocols","original":{"line":102,"column":4},"generated":{"line":2,"column":1162}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":102,"column":15},"generated":{"line":2,"column":1172}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"websocketSubProtocol","original":{"line":102,"column":16},"generated":{"line":2,"column":1173}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"proxy","original":{"line":105,"column":2},"generated":{"line":2,"column":1178}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildProxy","original":{"line":105,"column":10},"generated":{"line":2,"column":1180}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":106,"column":2},"generated":{"line":2,"column":1185}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"duplexify","original":{"line":106,"column":11},"generated":{"line":2,"column":1187}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"obj","original":{"line":106,"column":21},"generated":{"line":2,"column":1189}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"_destroy","original":{"line":107,"column":9},"generated":{"line":2,"column":1196}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":107,"column":20},"generated":{"line":2,"column":1205}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"err","original":{"line":107,"column":30},"generated":{"line":2,"column":1214}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"cb","original":{"line":107,"column":35},"generated":{"line":2,"column":1216}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":108,"column":4},"generated":{"line":2,"column":1219}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"close","original":{"line":108,"column":15},"generated":{"line":2,"column":1221}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":108,"column":21},"generated":{"line":2,"column":1227}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"success","original":{"line":109,"column":6},"generated":{"line":2,"column":1228}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":109,"column":15},"generated":{"line":2,"column":1236}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"cb","original":{"line":110,"column":8},"generated":{"line":2,"column":1247}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"cb","original":{"line":110,"column":14},"generated":{"line":2,"column":1250}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"err","original":{"line":110,"column":17},"generated":{"line":2,"column":1252}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroyRef","original":{"line":115,"column":6},"generated":{"line":2,"column":1259}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroyRef","original":{"line":115,"column":6},"generated":{"line":2,"column":1263}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":115,"column":19},"generated":{"line":2,"column":1265}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroy","original":{"line":115,"column":26},"generated":{"line":2,"column":1267}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":131,"column":9},"generated":{"line":2,"column":1275}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":116,"column":2},"generated":{"line":2,"column":1282}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroy","original":{"line":116,"column":9},"generated":{"line":2,"column":1284}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":116,"column":19},"generated":{"line":2,"column":1292}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":117,"column":4},"generated":{"line":2,"column":1303}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroy","original":{"line":117,"column":11},"generated":{"line":2,"column":1305}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"destroyRef","original":{"line":117,"column":21},"generated":{"line":2,"column":1313}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"self","original":{"line":119,"column":8},"generated":{"line":2,"column":1315}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"self","original":{"line":119,"column":8},"generated":{"line":2,"column":1319}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":119,"column":15},"generated":{"line":2,"column":1321}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"setTimeout","original":{"line":120,"column":4},"generated":{"line":2,"column":1326}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":120,"column":15},"generated":{"line":2,"column":1337}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"socketTask","original":{"line":121,"column":6},"generated":{"line":2,"column":1348}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"close","original":{"line":121,"column":17},"generated":{"line":2,"column":1350}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":121,"column":23},"generated":{"line":2,"column":1356}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"fail","original":{"line":122,"column":8},"generated":{"line":2,"column":1357}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":122,"column":14},"generated":{"line":2,"column":1362}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"self","original":{"line":123,"column":10},"generated":{"line":2,"column":1373}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"_destroy","original":{"line":123,"column":15},"generated":{"line":2,"column":1375}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":123,"column":24},"generated":{"line":2,"column":1384}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"Error","original":{"line":123,"column":28},"generated":{"line":2,"column":1388}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","original":{"line":126,"column":7},"generated":{"line":2,"column":1399}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"bind","original":{"line":127,"column":4},"generated":{"line":2,"column":1403}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":127,"column":9},"generated":{"line":2,"column":1408}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"bindEventHandler","original":{"line":129,"column":2},"generated":{"line":2,"column":1411}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"stream","original":{"line":131,"column":9},"generated":{"line":2,"column":1415}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"module","original":{"line":134,"column":0},"generated":{"line":2,"column":1417}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"exports","original":{"line":134,"column":7},"generated":{"line":2,"column":1424}},{"source":"../../../node_modules/mqtt/lib/connect/wx.js","name":"buildStream","original":{"line":134,"column":17},"generated":{"line":2,"column":1432}}],"sources":{"../../../node_modules/mqtt/lib/connect/wx.js":"'use strict'\n\nvar Transform = require('readable-stream').Transform\nvar duplexify = require('duplexify')\n\n/* global wx */\nvar socketTask\nvar proxy\nvar stream\n\nfunction buildProxy () {\n  var proxy = new Transform()\n  proxy._write = function (chunk, encoding, next) {\n    socketTask.send({\n      data: chunk.buffer,\n      success: function () {\n        next()\n      },\n      fail: function (errMsg) {\n        next(new Error(errMsg))\n      }\n    })\n  }\n  proxy._flush = function socketEnd (done) {\n    socketTask.close({\n      success: function () {\n        done()\n      }\n    })\n  }\n\n  return proxy\n}\n\nfunction setDefaultOpts (opts) {\n  if (!opts.hostname) {\n    opts.hostname = 'localhost'\n  }\n  if (!opts.path) {\n    opts.path = '/'\n  }\n\n  if (!opts.wsOptions) {\n    opts.wsOptions = {}\n  }\n}\n\nfunction buildUrl (opts, client) {\n  var protocol = opts.protocol === 'wxs' ? 'wss' : 'ws'\n  var url = protocol + '://' + opts.hostname + opts.path\n  if (opts.port && opts.port !== 80 && opts.port !== 443) {\n    url = protocol + '://' + opts.hostname + ':' + opts.port + opts.path\n  }\n  if (typeof (opts.transformWsUrl) === 'function') {\n    url = opts.transformWsUrl(url, opts, client)\n  }\n  return url\n}\n\nfunction bindEventHandler () {\n  socketTask.onOpen(function () {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  })\n\n  socketTask.onMessage(function (res) {\n    var data = res.data\n\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    else data = Buffer.from(data, 'utf8')\n    proxy.push(data)\n  })\n\n  socketTask.onClose(function () {\n    stream.end()\n    stream.destroy()\n  })\n\n  socketTask.onError(function (res) {\n    stream.destroy(new Error(res.errMsg))\n  })\n}\n\nfunction buildStream (client, opts) {\n  opts.hostname = opts.hostname || opts.host\n\n  if (!opts.hostname) {\n    throw new Error('Could not determine host. Specify host manually.')\n  }\n\n  var websocketSubProtocol =\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n      ? 'mqttv3.1'\n      : 'mqtt'\n\n  setDefaultOpts(opts)\n\n  var url = buildUrl(opts, client)\n  socketTask = wx.connectSocket({\n    url: url,\n    protocols: [websocketSubProtocol]\n  })\n\n  proxy = buildProxy()\n  stream = duplexify.obj()\n  stream._destroy = function (err, cb) {\n    socketTask.close({\n      success: function () {\n        cb && cb(err)\n      }\n    })\n  }\n\n  var destroyRef = stream.destroy\n  stream.destroy = function () {\n    stream.destroy = destroyRef\n\n    var self = this\n    setTimeout(function () {\n      socketTask.close({\n        fail: function () {\n          self._destroy(new Error())\n        }\n      })\n    }, 0)\n  }.bind(stream)\n\n  bindEventHandler()\n\n  return stream\n}\n\nmodule.exports = buildStream\n"},"lineCount":null}},"error":null,"hash":"eff8831688622943e2a94aef6f28ebc4","cacheData":{"env":{}}}