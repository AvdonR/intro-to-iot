{"id":"ppm5","dependencies":[{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\package.json","includedInParent":true,"mtime":1607041298567},{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\package.json","includedInParent":true,"mtime":1607041298390},{"name":"readable-stream","loc":{"line":3,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\node_modules\\readable-stream\\readable-browser.js"},{"name":"duplexify","loc":{"line":4,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\duplexify\\index.js"},{"name":"base64-js","loc":{"line":5,"column":21},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\base64-js\\index.js"},{"name":"buffer","parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar t,o,e,r=require(\"buffer\").Buffer,n=require(\"readable-stream\").Transform,s=require(\"duplexify\"),a=require(\"base64-js\"),f=!1;function u(){var o=new n;return o._write=function(o,e,r){t.sendSocketMessage({data:o.buffer,success:function(){r()},fail:function(){r(new Error)}})},o._flush=function(o){t.closeSocket({success:function(){o()}})},o}function c(t){t.hostname||(t.hostname=\"localhost\"),t.path||(t.path=\"/\"),t.wsOptions||(t.wsOptions={})}function i(t,o){var e=\"alis\"===t.protocol?\"wss\":\"ws\",r=e+\"://\"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=e+\"://\"+t.hostname+\":\"+t.port+t.path),\"function\"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,o)),r}function l(){f||(f=!0,t.onSocketOpen(function(){e.setReadable(o),e.setWritable(o),e.emit(\"connect\")}),t.onSocketMessage(function(t){if(\"string\"==typeof t.data){var e=a.toByteArray(t.data),n=r.from(e);o.push(n)}else{var s=new FileReader;s.addEventListener(\"load\",function(){var t=s.result;t=t instanceof ArrayBuffer?r.from(t):r.from(t,\"utf8\"),o.push(t)}),s.readAsArrayBuffer(t.data)}}),t.onSocketClose(function(){e.end(),e.destroy()}),t.onSocketError(function(t){e.destroy(t)}))}function p(r,n){if(n.hostname=n.hostname||n.host,!n.hostname)throw new Error(\"Could not determine host. Specify host manually.\");var a=\"MQIsdp\"===n.protocolId&&3===n.protocolVersion?\"mqttv3.1\":\"mqtt\";c(n);var f=i(n,r);return(t=n.my).connectSocket({url:f,protocols:a}),o=u(),e=s.obj(),l(),e}module.exports=p;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":130,"column":0},"generated":{"line":2,"column":0}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":8,"column":4},"generated":{"line":2,"column":4}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":9,"column":4},"generated":{"line":2,"column":6}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":10,"column":4},"generated":{"line":2,"column":8}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":130,"column":0},"generated":{"line":2,"column":10}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":130,"column":0},"generated":{"line":2,"column":12}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":130,"column":0},"generated":{"line":2,"column":20}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":130,"column":0},"generated":{"line":2,"column":30}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":3,"column":4},"generated":{"line":2,"column":37}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"require","original":{"line":3,"column":16},"generated":{"line":2,"column":39}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":3,"column":24},"generated":{"line":2,"column":47}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":3,"column":43},"generated":{"line":2,"column":66}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"duplexify","original":{"line":4,"column":4},"generated":{"line":2,"column":76}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"require","original":{"line":4,"column":16},"generated":{"line":2,"column":78}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":4,"column":24},"generated":{"line":2,"column":86}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"base64","original":{"line":5,"column":4},"generated":{"line":2,"column":99}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"require","original":{"line":5,"column":13},"generated":{"line":2,"column":101}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":5,"column":21},"generated":{"line":2,"column":109}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":11,"column":4},"generated":{"line":2,"column":122}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":11,"column":20},"generated":{"line":2,"column":125}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":13,"column":0},"generated":{"line":2,"column":127}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildProxy","original":{"line":13,"column":9},"generated":{"line":2,"column":136}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":14,"column":6},"generated":{"line":2,"column":140}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":14,"column":6},"generated":{"line":2,"column":144}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":14,"column":14},"generated":{"line":2,"column":146}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":14,"column":18},"generated":{"line":2,"column":150}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":34,"column":9},"generated":{"line":2,"column":152}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":15,"column":2},"generated":{"line":2,"column":159}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"_write","original":{"line":15,"column":8},"generated":{"line":2,"column":161}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":15,"column":17},"generated":{"line":2,"column":168}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"chunk","original":{"line":15,"column":27},"generated":{"line":2,"column":177}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"encoding","original":{"line":15,"column":34},"generated":{"line":2,"column":179}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":15,"column":44},"generated":{"line":2,"column":181}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":16,"column":4},"generated":{"line":2,"column":184}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"sendSocketMessage","original":{"line":16,"column":7},"generated":{"line":2,"column":186}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":16,"column":25},"generated":{"line":2,"column":204}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":17,"column":6},"generated":{"line":2,"column":205}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"chunk","original":{"line":17,"column":12},"generated":{"line":2,"column":210}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":17,"column":18},"generated":{"line":2,"column":212}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"success","original":{"line":18,"column":6},"generated":{"line":2,"column":219}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":18,"column":15},"generated":{"line":2,"column":227}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":19,"column":8},"generated":{"line":2,"column":238}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"fail","original":{"line":21,"column":6},"generated":{"line":2,"column":243}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":21,"column":12},"generated":{"line":2,"column":248}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":22,"column":8},"generated":{"line":2,"column":259}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":22,"column":13},"generated":{"line":2,"column":261}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Error","original":{"line":22,"column":17},"generated":{"line":2,"column":265}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":26,"column":2},"generated":{"line":2,"column":276}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"_flush","original":{"line":26,"column":8},"generated":{"line":2,"column":278}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":26,"column":17},"generated":{"line":2,"column":285}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"done","original":{"line":26,"column":37},"generated":{"line":2,"column":294}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":27,"column":4},"generated":{"line":2,"column":297}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"closeSocket","original":{"line":27,"column":7},"generated":{"line":2,"column":299}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":27,"column":19},"generated":{"line":2,"column":311}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"success","original":{"line":28,"column":6},"generated":{"line":2,"column":312}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":28,"column":15},"generated":{"line":2,"column":320}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"done","original":{"line":29,"column":8},"generated":{"line":2,"column":331}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":34,"column":9},"generated":{"line":2,"column":339}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":37,"column":0},"generated":{"line":2,"column":341}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setDefaultOpts","original":{"line":37,"column":9},"generated":{"line":2,"column":350}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":37,"column":25},"generated":{"line":2,"column":352}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":38,"column":7},"generated":{"line":2,"column":355}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":38,"column":12},"generated":{"line":2,"column":357}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":39,"column":4},"generated":{"line":2,"column":368}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":39,"column":9},"generated":{"line":2,"column":370}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":39,"column":20},"generated":{"line":2,"column":379}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":41,"column":7},"generated":{"line":2,"column":392}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":41,"column":12},"generated":{"line":2,"column":394}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":42,"column":4},"generated":{"line":2,"column":401}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":42,"column":9},"generated":{"line":2,"column":403}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":42,"column":16},"generated":{"line":2,"column":408}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":45,"column":7},"generated":{"line":2,"column":413}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"wsOptions","original":{"line":45,"column":12},"generated":{"line":2,"column":415}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":46,"column":4},"generated":{"line":2,"column":427}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"wsOptions","original":{"line":46,"column":9},"generated":{"line":2,"column":429}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":46,"column":21},"generated":{"line":2,"column":439}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":50,"column":0},"generated":{"line":2,"column":443}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildUrl","original":{"line":50,"column":9},"generated":{"line":2,"column":452}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":50,"column":19},"generated":{"line":2,"column":454}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":50,"column":25},"generated":{"line":2,"column":456}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":51,"column":6},"generated":{"line":2,"column":459}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":51,"column":6},"generated":{"line":2,"column":463}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":51,"column":35},"generated":{"line":2,"column":465}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":51,"column":17},"generated":{"line":2,"column":474}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":51,"column":22},"generated":{"line":2,"column":476}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":51,"column":44},"generated":{"line":2,"column":485}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":51,"column":52},"generated":{"line":2,"column":491}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":52,"column":6},"generated":{"line":2,"column":496}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":52,"column":12},"generated":{"line":2,"column":498}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":52,"column":23},"generated":{"line":2,"column":500}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":52,"column":31},"generated":{"line":2,"column":506}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":52,"column":36},"generated":{"line":2,"column":508}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":52,"column":47},"generated":{"line":2,"column":517}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":52,"column":52},"generated":{"line":2,"column":519}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":59,"column":9},"generated":{"line":2,"column":524}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":6},"generated":{"line":2,"column":531}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":53,"column":11},"generated":{"line":2,"column":533}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":53,"column":33},"generated":{"line":2,"column":539}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":19},"generated":{"line":2,"column":544}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":53,"column":24},"generated":{"line":2,"column":546}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":53,"column":53},"generated":{"line":2,"column":552}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":39},"generated":{"line":2,"column":558}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":53,"column":44},"generated":{"line":2,"column":560}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":54,"column":4},"generated":{"line":2,"column":567}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":54,"column":10},"generated":{"line":2,"column":569}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":54,"column":21},"generated":{"line":2,"column":571}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":54,"column":29},"generated":{"line":2,"column":577}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":54,"column":34},"generated":{"line":2,"column":579}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":54,"column":45},"generated":{"line":2,"column":588}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":54,"column":51},"generated":{"line":2,"column":592}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":54,"column":56},"generated":{"line":2,"column":594}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":54,"column":63},"generated":{"line":2,"column":599}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":54,"column":68},"generated":{"line":2,"column":601}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":56,"column":39},"generated":{"line":2,"column":607}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":56,"column":14},"generated":{"line":2,"column":626}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"transformWsUrl","original":{"line":56,"column":19},"generated":{"line":2,"column":628}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":57,"column":4},"generated":{"line":2,"column":645}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":57,"column":10},"generated":{"line":2,"column":647}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"transformWsUrl","original":{"line":57,"column":15},"generated":{"line":2,"column":649}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":57,"column":30},"generated":{"line":2,"column":664}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":57,"column":35},"generated":{"line":2,"column":666}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":57,"column":41},"generated":{"line":2,"column":668}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":59,"column":9},"generated":{"line":2,"column":672}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":62,"column":0},"generated":{"line":2,"column":674}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"bindEventHandler","original":{"line":62,"column":9},"generated":{"line":2,"column":683}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":63,"column":6},"generated":{"line":2,"column":687}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":65,"column":2},"generated":{"line":2,"column":691}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":65,"column":18},"generated":{"line":2,"column":694}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":67,"column":2},"generated":{"line":2,"column":696}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketOpen","original":{"line":67,"column":5},"generated":{"line":2,"column":698}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":67,"column":18},"generated":{"line":2,"column":711}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":68,"column":4},"generated":{"line":2,"column":722}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setReadable","original":{"line":68,"column":11},"generated":{"line":2,"column":724}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":68,"column":23},"generated":{"line":2,"column":736}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":69,"column":4},"generated":{"line":2,"column":739}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setWritable","original":{"line":69,"column":11},"generated":{"line":2,"column":741}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":69,"column":23},"generated":{"line":2,"column":753}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":70,"column":4},"generated":{"line":2,"column":756}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"emit","original":{"line":70,"column":11},"generated":{"line":2,"column":758}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":70,"column":16},"generated":{"line":2,"column":763}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":73,"column":2},"generated":{"line":2,"column":776}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketMessage","original":{"line":73,"column":5},"generated":{"line":2,"column":778}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":73,"column":21},"generated":{"line":2,"column":794}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":73,"column":31},"generated":{"line":2,"column":803}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":74,"column":8},"generated":{"line":2,"column":806}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":74,"column":28},"generated":{"line":2,"column":809}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":74,"column":15},"generated":{"line":2,"column":826}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":74,"column":19},"generated":{"line":2,"column":828}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":74,"column":38},"generated":{"line":2,"column":833}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"array","original":{"line":75,"column":10},"generated":{"line":2,"column":834}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"array","original":{"line":75,"column":10},"generated":{"line":2,"column":838}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"base64","original":{"line":75,"column":18},"generated":{"line":2,"column":840}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"toByteArray","original":{"line":75,"column":25},"generated":{"line":2,"column":842}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":75,"column":37},"generated":{"line":2,"column":854}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":75,"column":41},"generated":{"line":2,"column":856}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":76,"column":10},"generated":{"line":2,"column":862}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":76,"column":19},"generated":{"line":2,"column":864}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":76,"column":26},"generated":{"line":2,"column":866}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"array","original":{"line":76,"column":31},"generated":{"line":2,"column":871}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":77,"column":6},"generated":{"line":2,"column":874}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"push","original":{"line":77,"column":12},"generated":{"line":2,"column":876}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":77,"column":17},"generated":{"line":2,"column":881}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":78,"column":11},"generated":{"line":2,"column":888}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":79,"column":10},"generated":{"line":2,"column":889}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":79,"column":10},"generated":{"line":2,"column":893}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":79,"column":19},"generated":{"line":2,"column":895}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"FileReader","original":{"line":79,"column":23},"generated":{"line":2,"column":899}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":80,"column":6},"generated":{"line":2,"column":910}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"addEventListener","original":{"line":80,"column":13},"generated":{"line":2,"column":912}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":80,"column":30},"generated":{"line":2,"column":929}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":80,"column":38},"generated":{"line":2,"column":936}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":81,"column":12},"generated":{"line":2,"column":947}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":81,"column":12},"generated":{"line":2,"column":951}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":81,"column":19},"generated":{"line":2,"column":953}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"result","original":{"line":81,"column":26},"generated":{"line":2,"column":955}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":83,"column":41},"generated":{"line":2,"column":962}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":83,"column":12},"generated":{"line":2,"column":964}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"ArrayBuffer","original":{"line":83,"column":28},"generated":{"line":2,"column":977}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":83,"column":48},"generated":{"line":2,"column":989}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":83,"column":55},"generated":{"line":2,"column":991}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":83,"column":60},"generated":{"line":2,"column":996}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":84,"column":20},"generated":{"line":2,"column":999}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":84,"column":27},"generated":{"line":2,"column":1001}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":84,"column":32},"generated":{"line":2,"column":1006}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":84,"column":38},"generated":{"line":2,"column":1008}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":85,"column":8},"generated":{"line":2,"column":1016}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"push","original":{"line":85,"column":14},"generated":{"line":2,"column":1018}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":85,"column":19},"generated":{"line":2,"column":1023}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":87,"column":6},"generated":{"line":2,"column":1028}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"readAsArrayBuffer","original":{"line":87,"column":13},"generated":{"line":2,"column":1030}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":87,"column":31},"generated":{"line":2,"column":1048}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":87,"column":35},"generated":{"line":2,"column":1050}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":91,"column":2},"generated":{"line":2,"column":1059}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketClose","original":{"line":91,"column":5},"generated":{"line":2,"column":1061}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":91,"column":19},"generated":{"line":2,"column":1075}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":92,"column":4},"generated":{"line":2,"column":1086}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"end","original":{"line":92,"column":11},"generated":{"line":2,"column":1088}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":93,"column":4},"generated":{"line":2,"column":1094}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"destroy","original":{"line":93,"column":11},"generated":{"line":2,"column":1096}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":96,"column":2},"generated":{"line":2,"column":1108}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketError","original":{"line":96,"column":5},"generated":{"line":2,"column":1110}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":96,"column":19},"generated":{"line":2,"column":1124}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":96,"column":29},"generated":{"line":2,"column":1133}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":97,"column":4},"generated":{"line":2,"column":1136}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"destroy","original":{"line":97,"column":11},"generated":{"line":2,"column":1138}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":97,"column":19},"generated":{"line":2,"column":1146}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":101,"column":0},"generated":{"line":2,"column":1152}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildStream","original":{"line":101,"column":9},"generated":{"line":2,"column":1161}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":101,"column":22},"generated":{"line":2,"column":1163}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":101,"column":30},"generated":{"line":2,"column":1165}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":104,"column":6},"generated":{"line":2,"column":1168}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":102,"column":2},"generated":{"line":2,"column":1171}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":102,"column":7},"generated":{"line":2,"column":1173}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":102,"column":18},"generated":{"line":2,"column":1182}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":102,"column":23},"generated":{"line":2,"column":1184}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":102,"column":35},"generated":{"line":2,"column":1194}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"host","original":{"line":102,"column":40},"generated":{"line":2,"column":1196}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":104,"column":7},"generated":{"line":2,"column":1202}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":104,"column":12},"generated":{"line":2,"column":1204}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":105,"column":10},"generated":{"line":2,"column":1213}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":105,"column":10},"generated":{"line":2,"column":1219}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Error","original":{"line":105,"column":14},"generated":{"line":2,"column":1223}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":105,"column":20},"generated":{"line":2,"column":1229}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":108,"column":6},"generated":{"line":2,"column":1281}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":108,"column":6},"generated":{"line":2,"column":1285}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":109,"column":25},"generated":{"line":2,"column":1287}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":109,"column":5},"generated":{"line":2,"column":1298}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocolId","original":{"line":109,"column":10},"generated":{"line":2,"column":1300}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":109,"column":64},"generated":{"line":2,"column":1312}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":109,"column":39},"generated":{"line":2,"column":1316}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocolVersion","original":{"line":109,"column":44},"generated":{"line":2,"column":1318}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":110,"column":8},"generated":{"line":2,"column":1334}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":111,"column":8},"generated":{"line":2,"column":1345}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setDefaultOpts","original":{"line":113,"column":2},"generated":{"line":2,"column":1352}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":113,"column":17},"generated":{"line":2,"column":1354}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":115,"column":6},"generated":{"line":2,"column":1357}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":115,"column":6},"generated":{"line":2,"column":1361}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildUrl","original":{"line":115,"column":12},"generated":{"line":2,"column":1363}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":115,"column":21},"generated":{"line":2,"column":1365}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":115,"column":27},"generated":{"line":2,"column":1367}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":127,"column":9},"generated":{"line":2,"column":1370}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":116,"column":2},"generated":{"line":2,"column":1377}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":116,"column":7},"generated":{"line":2,"column":1379}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":116,"column":12},"generated":{"line":2,"column":1381}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"connectSocket","original":{"line":117,"column":5},"generated":{"line":2,"column":1385}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":117,"column":19},"generated":{"line":2,"column":1399}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":118,"column":4},"generated":{"line":2,"column":1400}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":118,"column":9},"generated":{"line":2,"column":1404}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocols","original":{"line":119,"column":4},"generated":{"line":2,"column":1406}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":119,"column":15},"generated":{"line":2,"column":1416}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":122,"column":2},"generated":{"line":2,"column":1420}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildProxy","original":{"line":122,"column":10},"generated":{"line":2,"column":1422}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":123,"column":2},"generated":{"line":2,"column":1426}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"duplexify","original":{"line":123,"column":11},"generated":{"line":2,"column":1428}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"obj","original":{"line":123,"column":21},"generated":{"line":2,"column":1430}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"bindEventHandler","original":{"line":125,"column":2},"generated":{"line":2,"column":1436}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":127,"column":9},"generated":{"line":2,"column":1440}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"module","original":{"line":130,"column":0},"generated":{"line":2,"column":1442}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"exports","original":{"line":130,"column":7},"generated":{"line":2,"column":1449}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildStream","original":{"line":130,"column":17},"generated":{"line":2,"column":1457}}],"sources":{"../../../node_modules/mqtt/lib/connect/ali.js":"'use strict'\r\n\r\nvar Transform = require('readable-stream').Transform\r\nvar duplexify = require('duplexify')\r\nvar base64 = require('base64-js')\r\n\r\n/* global FileReader */\r\nvar my\r\nvar proxy\r\nvar stream\r\nvar isInitialized = false\r\n\r\nfunction buildProxy () {\r\n  var proxy = new Transform()\r\n  proxy._write = function (chunk, encoding, next) {\r\n    my.sendSocketMessage({\r\n      data: chunk.buffer,\r\n      success: function () {\r\n        next()\r\n      },\r\n      fail: function () {\r\n        next(new Error())\r\n      }\r\n    })\r\n  }\r\n  proxy._flush = function socketEnd (done) {\r\n    my.closeSocket({\r\n      success: function () {\r\n        done()\r\n      }\r\n    })\r\n  }\r\n\r\n  return proxy\r\n}\r\n\r\nfunction setDefaultOpts (opts) {\r\n  if (!opts.hostname) {\r\n    opts.hostname = 'localhost'\r\n  }\r\n  if (!opts.path) {\r\n    opts.path = '/'\r\n  }\r\n\r\n  if (!opts.wsOptions) {\r\n    opts.wsOptions = {}\r\n  }\r\n}\r\n\r\nfunction buildUrl (opts, client) {\r\n  var protocol = opts.protocol === 'alis' ? 'wss' : 'ws'\r\n  var url = protocol + '://' + opts.hostname + opts.path\r\n  if (opts.port && opts.port !== 80 && opts.port !== 443) {\r\n    url = protocol + '://' + opts.hostname + ':' + opts.port + opts.path\r\n  }\r\n  if (typeof (opts.transformWsUrl) === 'function') {\r\n    url = opts.transformWsUrl(url, opts, client)\r\n  }\r\n  return url\r\n}\r\n\r\nfunction bindEventHandler () {\r\n  if (isInitialized) return\r\n\r\n  isInitialized = true\r\n\r\n  my.onSocketOpen(function () {\r\n    stream.setReadable(proxy)\r\n    stream.setWritable(proxy)\r\n    stream.emit('connect')\r\n  })\r\n\r\n  my.onSocketMessage(function (res) {\r\n    if (typeof res.data === 'string') {\r\n      var array = base64.toByteArray(res.data)\r\n      var buffer = Buffer.from(array)\r\n      proxy.push(buffer)\r\n    } else {\r\n      var reader = new FileReader()\r\n      reader.addEventListener('load', function () {\r\n        var data = reader.result\r\n\r\n        if (data instanceof ArrayBuffer) data = Buffer.from(data)\r\n        else data = Buffer.from(data, 'utf8')\r\n        proxy.push(data)\r\n      })\r\n      reader.readAsArrayBuffer(res.data)\r\n    }\r\n  })\r\n\r\n  my.onSocketClose(function () {\r\n    stream.end()\r\n    stream.destroy()\r\n  })\r\n\r\n  my.onSocketError(function (res) {\r\n    stream.destroy(res)\r\n  })\r\n}\r\n\r\nfunction buildStream (client, opts) {\r\n  opts.hostname = opts.hostname || opts.host\r\n\r\n  if (!opts.hostname) {\r\n    throw new Error('Could not determine host. Specify host manually.')\r\n  }\r\n\r\n  var websocketSubProtocol =\r\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\r\n      ? 'mqttv3.1'\r\n      : 'mqtt'\r\n\r\n  setDefaultOpts(opts)\r\n\r\n  var url = buildUrl(opts, client)\r\n  my = opts.my\r\n  my.connectSocket({\r\n    url: url,\r\n    protocols: websocketSubProtocol\r\n  })\r\n\r\n  proxy = buildProxy()\r\n  stream = duplexify.obj()\r\n\r\n  bindEventHandler()\r\n\r\n  return stream\r\n}\r\n\r\nmodule.exports = buildStream\r\n"},"lineCount":null}},"error":null,"hash":"eec3ca4ba922ec765157b898f170a42b","cacheData":{"env":{}}}