{"id":"ppm5","dependencies":[{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\package.json","includedInParent":true,"mtime":1607033658464},{"name":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\package.json","includedInParent":true,"mtime":499162500000},{"name":"readable-stream","loc":{"line":3,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\readable-stream\\readable-browser.js"},{"name":"duplexify","loc":{"line":4,"column":24},"parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\duplexify\\index.js"},{"name":"buffer","parent":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\mqtt\\lib\\connect\\ali.js","resolved":"C:\\Users\\danny\\Documents\\gitRoot\\intro-to-iot\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar o,t,e,r=require(\"buffer\").Buffer,n=require(\"readable-stream\").Transform,s=require(\"duplexify\"),a=!1;function f(){var t=new n;return t._write=function(t,e,r){o.sendSocketMessage({data:t.buffer,success:function(){r()},fail:function(){r(new Error)}})},t._flush=function(t){o.closeSocket({success:function(){t()}})},t}function c(o){o.hostname||(o.hostname=\"localhost\"),o.path||(o.path=\"/\"),o.wsOptions||(o.wsOptions={})}function u(o,t){var e=\"alis\"===o.protocol?\"wss\":\"ws\",r=e+\"://\"+o.hostname+o.path;return o.port&&80!==o.port&&443!==o.port&&(r=e+\"://\"+o.hostname+\":\"+o.port+o.path),\"function\"==typeof o.transformWsUrl&&(r=o.transformWsUrl(r,o,t)),r}function i(){a||(a=!0,o.onSocketOpen(function(){e.setReadable(t),e.setWritable(t),e.emit(\"connect\")}),o.onSocketMessage(function(o){if(\"string\"==typeof o.data){var e=r.from(o.data,\"base64\");t.push(e)}else{var n=new FileReader;n.addEventListener(\"load\",function(){var o=n.result;o=o instanceof ArrayBuffer?r.from(o):r.from(o,\"utf8\"),t.push(o)}),n.readAsArrayBuffer(o.data)}}),o.onSocketClose(function(){e.end(),e.destroy()}),o.onSocketError(function(o){e.destroy(o)}))}function l(r,n){if(n.hostname=n.hostname||n.host,!n.hostname)throw new Error(\"Could not determine host. Specify host manually.\");var a=\"MQIsdp\"===n.protocolId&&3===n.protocolVersion?\"mqttv3.1\":\"mqtt\";c(n);var l=u(n,r);return(o=n.my).connectSocket({url:l,protocols:a}),t=f(),e=s.obj(),i(),e}module.exports=l;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":128,"column":0},"generated":{"line":2,"column":0}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":7,"column":4},"generated":{"line":2,"column":4}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":8,"column":4},"generated":{"line":2,"column":6}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":9,"column":4},"generated":{"line":2,"column":8}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":128,"column":0},"generated":{"line":2,"column":10}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":128,"column":0},"generated":{"line":2,"column":12}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":128,"column":0},"generated":{"line":2,"column":20}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":128,"column":0},"generated":{"line":2,"column":30}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":3,"column":4},"generated":{"line":2,"column":37}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"require","original":{"line":3,"column":16},"generated":{"line":2,"column":39}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":3,"column":24},"generated":{"line":2,"column":47}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":3,"column":43},"generated":{"line":2,"column":66}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"duplexify","original":{"line":4,"column":4},"generated":{"line":2,"column":76}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"require","original":{"line":4,"column":16},"generated":{"line":2,"column":78}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":4,"column":24},"generated":{"line":2,"column":86}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":10,"column":4},"generated":{"line":2,"column":99}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":10,"column":20},"generated":{"line":2,"column":102}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":12,"column":0},"generated":{"line":2,"column":104}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildProxy","original":{"line":12,"column":9},"generated":{"line":2,"column":113}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":13,"column":6},"generated":{"line":2,"column":117}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":13,"column":6},"generated":{"line":2,"column":121}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":13,"column":14},"generated":{"line":2,"column":123}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Transform","original":{"line":13,"column":18},"generated":{"line":2,"column":127}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":33,"column":9},"generated":{"line":2,"column":129}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":14,"column":2},"generated":{"line":2,"column":136}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"_write","original":{"line":14,"column":8},"generated":{"line":2,"column":138}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":14,"column":17},"generated":{"line":2,"column":145}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"chunk","original":{"line":14,"column":27},"generated":{"line":2,"column":154}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"encoding","original":{"line":14,"column":34},"generated":{"line":2,"column":156}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":14,"column":44},"generated":{"line":2,"column":158}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":15,"column":4},"generated":{"line":2,"column":161}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"sendSocketMessage","original":{"line":15,"column":7},"generated":{"line":2,"column":163}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":15,"column":25},"generated":{"line":2,"column":181}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":16,"column":6},"generated":{"line":2,"column":182}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"chunk","original":{"line":16,"column":12},"generated":{"line":2,"column":187}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":16,"column":18},"generated":{"line":2,"column":189}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"success","original":{"line":17,"column":6},"generated":{"line":2,"column":196}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":17,"column":15},"generated":{"line":2,"column":204}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":18,"column":8},"generated":{"line":2,"column":215}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"fail","original":{"line":20,"column":6},"generated":{"line":2,"column":220}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":20,"column":12},"generated":{"line":2,"column":225}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"next","original":{"line":21,"column":8},"generated":{"line":2,"column":236}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":21,"column":13},"generated":{"line":2,"column":238}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Error","original":{"line":21,"column":17},"generated":{"line":2,"column":242}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":25,"column":2},"generated":{"line":2,"column":253}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"_flush","original":{"line":25,"column":8},"generated":{"line":2,"column":255}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":25,"column":17},"generated":{"line":2,"column":262}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"done","original":{"line":25,"column":37},"generated":{"line":2,"column":271}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":26,"column":4},"generated":{"line":2,"column":274}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"closeSocket","original":{"line":26,"column":7},"generated":{"line":2,"column":276}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":26,"column":19},"generated":{"line":2,"column":288}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"success","original":{"line":27,"column":6},"generated":{"line":2,"column":289}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":27,"column":15},"generated":{"line":2,"column":297}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"done","original":{"line":28,"column":8},"generated":{"line":2,"column":308}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":33,"column":9},"generated":{"line":2,"column":316}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":36,"column":0},"generated":{"line":2,"column":318}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setDefaultOpts","original":{"line":36,"column":9},"generated":{"line":2,"column":327}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":36,"column":25},"generated":{"line":2,"column":329}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":37,"column":7},"generated":{"line":2,"column":332}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":37,"column":12},"generated":{"line":2,"column":334}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":38,"column":4},"generated":{"line":2,"column":345}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":38,"column":9},"generated":{"line":2,"column":347}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":38,"column":20},"generated":{"line":2,"column":356}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":40,"column":7},"generated":{"line":2,"column":369}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":40,"column":12},"generated":{"line":2,"column":371}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":41,"column":4},"generated":{"line":2,"column":378}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":41,"column":9},"generated":{"line":2,"column":380}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":41,"column":16},"generated":{"line":2,"column":385}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":44,"column":7},"generated":{"line":2,"column":390}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"wsOptions","original":{"line":44,"column":12},"generated":{"line":2,"column":392}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":45,"column":4},"generated":{"line":2,"column":404}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"wsOptions","original":{"line":45,"column":9},"generated":{"line":2,"column":406}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":45,"column":21},"generated":{"line":2,"column":416}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":49,"column":0},"generated":{"line":2,"column":420}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildUrl","original":{"line":49,"column":9},"generated":{"line":2,"column":429}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":49,"column":19},"generated":{"line":2,"column":431}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":49,"column":25},"generated":{"line":2,"column":433}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":50,"column":6},"generated":{"line":2,"column":436}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":50,"column":6},"generated":{"line":2,"column":440}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":50,"column":35},"generated":{"line":2,"column":442}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":50,"column":17},"generated":{"line":2,"column":451}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":50,"column":22},"generated":{"line":2,"column":453}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":50,"column":44},"generated":{"line":2,"column":462}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":50,"column":52},"generated":{"line":2,"column":468}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":51,"column":6},"generated":{"line":2,"column":473}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":51,"column":12},"generated":{"line":2,"column":475}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":51,"column":23},"generated":{"line":2,"column":477}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":51,"column":31},"generated":{"line":2,"column":483}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":51,"column":36},"generated":{"line":2,"column":485}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":51,"column":47},"generated":{"line":2,"column":494}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":51,"column":52},"generated":{"line":2,"column":496}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":58,"column":9},"generated":{"line":2,"column":501}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":52,"column":6},"generated":{"line":2,"column":508}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":52,"column":11},"generated":{"line":2,"column":510}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":52,"column":33},"generated":{"line":2,"column":516}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":52,"column":19},"generated":{"line":2,"column":521}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":52,"column":24},"generated":{"line":2,"column":523}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":52,"column":53},"generated":{"line":2,"column":529}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":52,"column":39},"generated":{"line":2,"column":535}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":52,"column":44},"generated":{"line":2,"column":537}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":53,"column":4},"generated":{"line":2,"column":544}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocol","original":{"line":53,"column":10},"generated":{"line":2,"column":546}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":53,"column":21},"generated":{"line":2,"column":548}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":29},"generated":{"line":2,"column":554}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":53,"column":34},"generated":{"line":2,"column":556}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":53,"column":45},"generated":{"line":2,"column":565}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":51},"generated":{"line":2,"column":569}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"port","original":{"line":53,"column":56},"generated":{"line":2,"column":571}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":53,"column":63},"generated":{"line":2,"column":576}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"path","original":{"line":53,"column":68},"generated":{"line":2,"column":578}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":55,"column":39},"generated":{"line":2,"column":584}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":55,"column":14},"generated":{"line":2,"column":603}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"transformWsUrl","original":{"line":55,"column":19},"generated":{"line":2,"column":605}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":56,"column":4},"generated":{"line":2,"column":622}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":56,"column":10},"generated":{"line":2,"column":624}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"transformWsUrl","original":{"line":56,"column":15},"generated":{"line":2,"column":626}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":56,"column":30},"generated":{"line":2,"column":641}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":56,"column":35},"generated":{"line":2,"column":643}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":56,"column":41},"generated":{"line":2,"column":645}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":58,"column":9},"generated":{"line":2,"column":649}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":61,"column":0},"generated":{"line":2,"column":651}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"bindEventHandler","original":{"line":61,"column":9},"generated":{"line":2,"column":660}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":62,"column":6},"generated":{"line":2,"column":664}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"isInitialized","original":{"line":64,"column":2},"generated":{"line":2,"column":668}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":64,"column":18},"generated":{"line":2,"column":671}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":66,"column":2},"generated":{"line":2,"column":673}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketOpen","original":{"line":66,"column":5},"generated":{"line":2,"column":675}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":66,"column":18},"generated":{"line":2,"column":688}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":67,"column":4},"generated":{"line":2,"column":699}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setReadable","original":{"line":67,"column":11},"generated":{"line":2,"column":701}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":67,"column":23},"generated":{"line":2,"column":713}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":68,"column":4},"generated":{"line":2,"column":716}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setWritable","original":{"line":68,"column":11},"generated":{"line":2,"column":718}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":68,"column":23},"generated":{"line":2,"column":730}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":69,"column":4},"generated":{"line":2,"column":733}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"emit","original":{"line":69,"column":11},"generated":{"line":2,"column":735}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":69,"column":16},"generated":{"line":2,"column":740}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":72,"column":2},"generated":{"line":2,"column":753}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketMessage","original":{"line":72,"column":5},"generated":{"line":2,"column":755}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":72,"column":21},"generated":{"line":2,"column":771}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":72,"column":31},"generated":{"line":2,"column":780}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":73,"column":8},"generated":{"line":2,"column":783}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":73,"column":28},"generated":{"line":2,"column":786}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":73,"column":15},"generated":{"line":2,"column":803}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":73,"column":19},"generated":{"line":2,"column":805}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":73,"column":38},"generated":{"line":2,"column":810}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":74,"column":10},"generated":{"line":2,"column":811}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":74,"column":10},"generated":{"line":2,"column":815}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":74,"column":19},"generated":{"line":2,"column":817}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":74,"column":26},"generated":{"line":2,"column":819}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":74,"column":31},"generated":{"line":2,"column":824}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":74,"column":35},"generated":{"line":2,"column":826}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":74,"column":41},"generated":{"line":2,"column":831}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":75,"column":6},"generated":{"line":2,"column":841}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"push","original":{"line":75,"column":12},"generated":{"line":2,"column":843}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buffer","original":{"line":75,"column":17},"generated":{"line":2,"column":848}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":76,"column":11},"generated":{"line":2,"column":855}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":77,"column":10},"generated":{"line":2,"column":856}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":77,"column":10},"generated":{"line":2,"column":860}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":77,"column":19},"generated":{"line":2,"column":862}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"FileReader","original":{"line":77,"column":23},"generated":{"line":2,"column":866}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":78,"column":6},"generated":{"line":2,"column":877}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"addEventListener","original":{"line":78,"column":13},"generated":{"line":2,"column":879}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":78,"column":30},"generated":{"line":2,"column":896}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":78,"column":38},"generated":{"line":2,"column":903}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":79,"column":12},"generated":{"line":2,"column":914}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":79,"column":12},"generated":{"line":2,"column":918}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":79,"column":19},"generated":{"line":2,"column":920}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"result","original":{"line":79,"column":26},"generated":{"line":2,"column":922}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":81,"column":41},"generated":{"line":2,"column":929}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":81,"column":12},"generated":{"line":2,"column":931}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"ArrayBuffer","original":{"line":81,"column":28},"generated":{"line":2,"column":944}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":81,"column":48},"generated":{"line":2,"column":956}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":81,"column":55},"generated":{"line":2,"column":958}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":81,"column":60},"generated":{"line":2,"column":963}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Buffer","original":{"line":82,"column":20},"generated":{"line":2,"column":966}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"from","original":{"line":82,"column":27},"generated":{"line":2,"column":968}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":82,"column":32},"generated":{"line":2,"column":973}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":82,"column":38},"generated":{"line":2,"column":975}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":83,"column":8},"generated":{"line":2,"column":983}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"push","original":{"line":83,"column":14},"generated":{"line":2,"column":985}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":83,"column":19},"generated":{"line":2,"column":990}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"reader","original":{"line":85,"column":6},"generated":{"line":2,"column":995}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"readAsArrayBuffer","original":{"line":85,"column":13},"generated":{"line":2,"column":997}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":85,"column":31},"generated":{"line":2,"column":1015}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"data","original":{"line":85,"column":35},"generated":{"line":2,"column":1017}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":89,"column":2},"generated":{"line":2,"column":1026}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketClose","original":{"line":89,"column":5},"generated":{"line":2,"column":1028}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":89,"column":19},"generated":{"line":2,"column":1042}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":90,"column":4},"generated":{"line":2,"column":1053}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"end","original":{"line":90,"column":11},"generated":{"line":2,"column":1055}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":91,"column":4},"generated":{"line":2,"column":1061}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"destroy","original":{"line":91,"column":11},"generated":{"line":2,"column":1063}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":94,"column":2},"generated":{"line":2,"column":1075}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"onSocketError","original":{"line":94,"column":5},"generated":{"line":2,"column":1077}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":94,"column":19},"generated":{"line":2,"column":1091}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":94,"column":29},"generated":{"line":2,"column":1100}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":95,"column":4},"generated":{"line":2,"column":1103}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"destroy","original":{"line":95,"column":11},"generated":{"line":2,"column":1105}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"res","original":{"line":95,"column":19},"generated":{"line":2,"column":1113}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":99,"column":0},"generated":{"line":2,"column":1119}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildStream","original":{"line":99,"column":9},"generated":{"line":2,"column":1128}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":99,"column":22},"generated":{"line":2,"column":1130}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":99,"column":30},"generated":{"line":2,"column":1132}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":102,"column":6},"generated":{"line":2,"column":1135}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":100,"column":2},"generated":{"line":2,"column":1138}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":100,"column":7},"generated":{"line":2,"column":1140}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":100,"column":18},"generated":{"line":2,"column":1149}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":100,"column":23},"generated":{"line":2,"column":1151}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":100,"column":35},"generated":{"line":2,"column":1161}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"host","original":{"line":100,"column":40},"generated":{"line":2,"column":1163}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":102,"column":7},"generated":{"line":2,"column":1169}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"hostname","original":{"line":102,"column":12},"generated":{"line":2,"column":1171}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":103,"column":10},"generated":{"line":2,"column":1180}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":103,"column":10},"generated":{"line":2,"column":1186}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"Error","original":{"line":103,"column":14},"generated":{"line":2,"column":1190}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":103,"column":20},"generated":{"line":2,"column":1196}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":106,"column":6},"generated":{"line":2,"column":1248}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":106,"column":6},"generated":{"line":2,"column":1252}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":107,"column":25},"generated":{"line":2,"column":1254}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":107,"column":5},"generated":{"line":2,"column":1265}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocolId","original":{"line":107,"column":10},"generated":{"line":2,"column":1267}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":107,"column":64},"generated":{"line":2,"column":1279}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":107,"column":39},"generated":{"line":2,"column":1283}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocolVersion","original":{"line":107,"column":44},"generated":{"line":2,"column":1285}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":108,"column":8},"generated":{"line":2,"column":1301}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":109,"column":8},"generated":{"line":2,"column":1312}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"setDefaultOpts","original":{"line":111,"column":2},"generated":{"line":2,"column":1319}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":111,"column":17},"generated":{"line":2,"column":1321}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":113,"column":6},"generated":{"line":2,"column":1324}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":113,"column":6},"generated":{"line":2,"column":1328}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildUrl","original":{"line":113,"column":12},"generated":{"line":2,"column":1330}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":113,"column":21},"generated":{"line":2,"column":1332}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"client","original":{"line":113,"column":27},"generated":{"line":2,"column":1334}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":125,"column":9},"generated":{"line":2,"column":1337}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":114,"column":2},"generated":{"line":2,"column":1344}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"opts","original":{"line":114,"column":7},"generated":{"line":2,"column":1346}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"my","original":{"line":114,"column":12},"generated":{"line":2,"column":1348}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"connectSocket","original":{"line":115,"column":5},"generated":{"line":2,"column":1352}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","original":{"line":115,"column":19},"generated":{"line":2,"column":1366}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":116,"column":4},"generated":{"line":2,"column":1367}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"url","original":{"line":116,"column":9},"generated":{"line":2,"column":1371}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"protocols","original":{"line":117,"column":4},"generated":{"line":2,"column":1373}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"websocketSubProtocol","original":{"line":117,"column":15},"generated":{"line":2,"column":1383}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"proxy","original":{"line":120,"column":2},"generated":{"line":2,"column":1387}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildProxy","original":{"line":120,"column":10},"generated":{"line":2,"column":1389}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":121,"column":2},"generated":{"line":2,"column":1393}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"duplexify","original":{"line":121,"column":11},"generated":{"line":2,"column":1395}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"obj","original":{"line":121,"column":21},"generated":{"line":2,"column":1397}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"bindEventHandler","original":{"line":123,"column":2},"generated":{"line":2,"column":1403}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"stream","original":{"line":125,"column":9},"generated":{"line":2,"column":1407}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"module","original":{"line":128,"column":0},"generated":{"line":2,"column":1409}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"exports","original":{"line":128,"column":7},"generated":{"line":2,"column":1416}},{"source":"../../../node_modules/mqtt/lib/connect/ali.js","name":"buildStream","original":{"line":128,"column":17},"generated":{"line":2,"column":1424}}],"sources":{"../../../node_modules/mqtt/lib/connect/ali.js":"'use strict'\n\nvar Transform = require('readable-stream').Transform\nvar duplexify = require('duplexify')\n\n/* global FileReader */\nvar my\nvar proxy\nvar stream\nvar isInitialized = false\n\nfunction buildProxy () {\n  var proxy = new Transform()\n  proxy._write = function (chunk, encoding, next) {\n    my.sendSocketMessage({\n      data: chunk.buffer,\n      success: function () {\n        next()\n      },\n      fail: function () {\n        next(new Error())\n      }\n    })\n  }\n  proxy._flush = function socketEnd (done) {\n    my.closeSocket({\n      success: function () {\n        done()\n      }\n    })\n  }\n\n  return proxy\n}\n\nfunction setDefaultOpts (opts) {\n  if (!opts.hostname) {\n    opts.hostname = 'localhost'\n  }\n  if (!opts.path) {\n    opts.path = '/'\n  }\n\n  if (!opts.wsOptions) {\n    opts.wsOptions = {}\n  }\n}\n\nfunction buildUrl (opts, client) {\n  var protocol = opts.protocol === 'alis' ? 'wss' : 'ws'\n  var url = protocol + '://' + opts.hostname + opts.path\n  if (opts.port && opts.port !== 80 && opts.port !== 443) {\n    url = protocol + '://' + opts.hostname + ':' + opts.port + opts.path\n  }\n  if (typeof (opts.transformWsUrl) === 'function') {\n    url = opts.transformWsUrl(url, opts, client)\n  }\n  return url\n}\n\nfunction bindEventHandler () {\n  if (isInitialized) return\n\n  isInitialized = true\n\n  my.onSocketOpen(function () {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  })\n\n  my.onSocketMessage(function (res) {\n    if (typeof res.data === 'string') {\n      var buffer = Buffer.from(res.data, 'base64')\n      proxy.push(buffer)\n    } else {\n      var reader = new FileReader()\n      reader.addEventListener('load', function () {\n        var data = reader.result\n\n        if (data instanceof ArrayBuffer) data = Buffer.from(data)\n        else data = Buffer.from(data, 'utf8')\n        proxy.push(data)\n      })\n      reader.readAsArrayBuffer(res.data)\n    }\n  })\n\n  my.onSocketClose(function () {\n    stream.end()\n    stream.destroy()\n  })\n\n  my.onSocketError(function (res) {\n    stream.destroy(res)\n  })\n}\n\nfunction buildStream (client, opts) {\n  opts.hostname = opts.hostname || opts.host\n\n  if (!opts.hostname) {\n    throw new Error('Could not determine host. Specify host manually.')\n  }\n\n  var websocketSubProtocol =\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n      ? 'mqttv3.1'\n      : 'mqtt'\n\n  setDefaultOpts(opts)\n\n  var url = buildUrl(opts, client)\n  my = opts.my\n  my.connectSocket({\n    url: url,\n    protocols: websocketSubProtocol\n  })\n\n  proxy = buildProxy()\n  stream = duplexify.obj()\n\n  bindEventHandler()\n\n  return stream\n}\n\nmodule.exports = buildStream\n"},"lineCount":null}},"error":null,"hash":"7b3fab2b114fef1d855456abde1e040e","cacheData":{"env":{}}}