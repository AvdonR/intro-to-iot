{"id":"xe6g","dependencies":[{"name":"/Users/avdonr/Documents/GitHub/intro-to-iot/package.json","includedInParent":true,"mtime":1607039588656},{"name":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/package.json","includedInParent":true,"mtime":499162500000},{"name":"tls","loc":{"line":2,"column":18},"parent":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/lib/connect/tls.js","resolved":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"debug","loc":{"line":3,"column":20},"parent":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/mqtt/lib/connect/tls.js","resolved":"/Users/avdonr/Documents/GitHub/intro-to-iot/node_modules/debug/src/browser.js"}],"generated":{"js":"\"use strict\";var e=require(\"tls\"),r=require(\"debug\")(\"mqttjs:tls\");function t(t,o){var n;function u(e){o.rejectUnauthorized&&t.emit(\"error\",e),n.end()}return o.port=o.port||8883,o.host=o.hostname||o.host||\"localhost\",o.servername=o.host,o.rejectUnauthorized=!1!==o.rejectUnauthorized,delete o.path,r(\"port %d host %s rejectUnauthorized %b\",o.port,o.host,o.rejectUnauthorized),(n=e.connect(o)).on(\"secureConnect\",function(){o.rejectUnauthorized&&!n.authorized?n.emit(\"error\",new Error(\"TLS not authorized\")):n.removeListener(\"error\",u)}),n.on(\"error\",u),n}module.exports=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"tls","original":{"line":2,"column":4},"generated":{"line":1,"column":17}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"require","original":{"line":2,"column":10},"generated":{"line":1,"column":19}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":2,"column":18},"generated":{"line":1,"column":27}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"debug","original":{"line":3,"column":4},"generated":{"line":1,"column":34}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"require","original":{"line":3,"column":12},"generated":{"line":1,"column":36}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":3,"column":20},"generated":{"line":1,"column":44}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"require","original":{"line":3,"column":12},"generated":{"line":1,"column":52}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":3,"column":29},"generated":{"line":1,"column":53}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":5,"column":0},"generated":{"line":1,"column":67}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"buildBuilder","original":{"line":5,"column":9},"generated":{"line":1,"column":76}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"mqttClient","original":{"line":5,"column":23},"generated":{"line":1,"column":78}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":5,"column":35},"generated":{"line":1,"column":80}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":6,"column":6},"generated":{"line":1,"column":83}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":6,"column":6},"generated":{"line":1,"column":87}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"handleTLSerrors","original":{"line":27,"column":11},"generated":{"line":1,"column":89}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"handleTLSerrors","original":{"line":27,"column":11},"generated":{"line":1,"column":98}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"err","original":{"line":27,"column":28},"generated":{"line":1,"column":100}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":29,"column":8},"generated":{"line":1,"column":103}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"rejectUnauthorized","original":{"line":29,"column":13},"generated":{"line":1,"column":105}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"mqttClient","original":{"line":30,"column":6},"generated":{"line":1,"column":125}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"emit","original":{"line":30,"column":17},"generated":{"line":1,"column":127}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":30,"column":22},"generated":{"line":1,"column":132}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"err","original":{"line":30,"column":31},"generated":{"line":1,"column":140}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":38,"column":4},"generated":{"line":1,"column":143}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"end","original":{"line":38,"column":15},"generated":{"line":1,"column":145}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":42,"column":9},"generated":{"line":1,"column":151}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":7,"column":2},"generated":{"line":1,"column":158}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"port","original":{"line":7,"column":7},"generated":{"line":1,"column":160}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":7,"column":14},"generated":{"line":1,"column":165}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"port","original":{"line":7,"column":19},"generated":{"line":1,"column":167}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":7,"column":27},"generated":{"line":1,"column":173}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":8,"column":2},"generated":{"line":1,"column":178}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"host","original":{"line":8,"column":7},"generated":{"line":1,"column":180}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":8,"column":14},"generated":{"line":1,"column":185}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"hostname","original":{"line":8,"column":19},"generated":{"line":1,"column":187}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":8,"column":31},"generated":{"line":1,"column":197}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"host","original":{"line":8,"column":36},"generated":{"line":1,"column":199}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":8,"column":44},"generated":{"line":1,"column":205}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":9,"column":2},"generated":{"line":1,"column":217}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"servername","original":{"line":9,"column":7},"generated":{"line":1,"column":219}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":9,"column":20},"generated":{"line":1,"column":230}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"host","original":{"line":9,"column":25},"generated":{"line":1,"column":232}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":11,"column":2},"generated":{"line":1,"column":237}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"rejectUnauthorized","original":{"line":11,"column":7},"generated":{"line":1,"column":239}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":11,"column":56},"generated":{"line":1,"column":259}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":11,"column":28},"generated":{"line":1,"column":263}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"rejectUnauthorized","original":{"line":11,"column":33},"generated":{"line":1,"column":265}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":13,"column":9},"generated":{"line":1,"column":291}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"path","original":{"line":13,"column":14},"generated":{"line":1,"column":293}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"debug","original":{"line":15,"column":2},"generated":{"line":1,"column":298}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":15,"column":8},"generated":{"line":1,"column":300}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":15,"column":49},"generated":{"line":1,"column":340}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"port","original":{"line":15,"column":54},"generated":{"line":1,"column":342}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":15,"column":60},"generated":{"line":1,"column":347}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"host","original":{"line":15,"column":65},"generated":{"line":1,"column":349}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":15,"column":71},"generated":{"line":1,"column":354}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"rejectUnauthorized","original":{"line":15,"column":76},"generated":{"line":1,"column":356}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":17,"column":2},"generated":{"line":1,"column":377}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"tls","original":{"line":17,"column":15},"generated":{"line":1,"column":379}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connect","original":{"line":17,"column":19},"generated":{"line":1,"column":381}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":17,"column":27},"generated":{"line":1,"column":389}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"on","original":{"line":19,"column":13},"generated":{"line":1,"column":393}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":19,"column":16},"generated":{"line":1,"column":396}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":19,"column":33},"generated":{"line":1,"column":412}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"opts","original":{"line":20,"column":8},"generated":{"line":1,"column":423}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"rejectUnauthorized","original":{"line":20,"column":13},"generated":{"line":1,"column":425}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":20,"column":36},"generated":{"line":1,"column":446}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"authorized","original":{"line":20,"column":47},"generated":{"line":1,"column":448}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":21,"column":6},"generated":{"line":1,"column":459}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"emit","original":{"line":21,"column":17},"generated":{"line":1,"column":461}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":21,"column":22},"generated":{"line":1,"column":466}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":21,"column":31},"generated":{"line":1,"column":474}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"Error","original":{"line":21,"column":35},"generated":{"line":1,"column":478}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":21,"column":41},"generated":{"line":1,"column":484}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":23,"column":6},"generated":{"line":1,"column":507}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"removeListener","original":{"line":23,"column":17},"generated":{"line":1,"column":509}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":23,"column":32},"generated":{"line":1,"column":524}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"handleTLSerrors","original":{"line":23,"column":41},"generated":{"line":1,"column":532}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":41,"column":2},"generated":{"line":1,"column":537}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"on","original":{"line":41,"column":13},"generated":{"line":1,"column":539}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","original":{"line":41,"column":16},"generated":{"line":1,"column":542}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"handleTLSerrors","original":{"line":41,"column":25},"generated":{"line":1,"column":550}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"connection","original":{"line":42,"column":9},"generated":{"line":1,"column":553}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"module","original":{"line":45,"column":0},"generated":{"line":1,"column":555}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"exports","original":{"line":45,"column":7},"generated":{"line":1,"column":562}},{"source":"../../../node_modules/mqtt/lib/connect/tls.js","name":"buildBuilder","original":{"line":45,"column":17},"generated":{"line":1,"column":570}}],"sources":{"../../../node_modules/mqtt/lib/connect/tls.js":"'use strict'\nvar tls = require('tls')\nvar debug = require('debug')('mqttjs:tls')\n\nfunction buildBuilder (mqttClient, opts) {\n  var connection\n  opts.port = opts.port || 8883\n  opts.host = opts.hostname || opts.host || 'localhost'\n  opts.servername = opts.host\n\n  opts.rejectUnauthorized = opts.rejectUnauthorized !== false\n\n  delete opts.path\n\n  debug('port %d host %s rejectUnauthorized %b', opts.port, opts.host, opts.rejectUnauthorized)\n\n  connection = tls.connect(opts)\n  /* eslint no-use-before-define: [2, \"nofunc\"] */\n  connection.on('secureConnect', function () {\n    if (opts.rejectUnauthorized && !connection.authorized) {\n      connection.emit('error', new Error('TLS not authorized'))\n    } else {\n      connection.removeListener('error', handleTLSerrors)\n    }\n  })\n\n  function handleTLSerrors (err) {\n    // How can I get verify this error is a tls error?\n    if (opts.rejectUnauthorized) {\n      mqttClient.emit('error', err)\n    }\n\n    // close this connection to match the behaviour of net\n    // otherwise all we get is an error from the connection\n    // and close event doesn't fire. This is a work around\n    // to enable the reconnect code to work the same as with\n    // net.createConnection\n    connection.end()\n  }\n\n  connection.on('error', handleTLSerrors)\n  return connection\n}\n\nmodule.exports = buildBuilder\n"},"lineCount":null}},"error":null,"hash":"9af257a6b143db546fc2792b4bc8efa4","cacheData":{"env":{}}}